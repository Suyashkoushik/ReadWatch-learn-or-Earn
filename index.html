<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Earning Website</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        /* CSS Styles */
        body {
            background-color: #111; /* Dark theme background */
            color: #00ffff; /* Neon blue color */
            position: relative;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .w3-navbar {
            background: rgba(0, 0, 0, 0.7); /* Transparent navigation bar */
        }

        .neon-text {
            color: #00ffff; /* Neon blue text color */
            text-shadow: 0 0 5px #00ffff, 0 0 10px #00ffff, 0 0 15px #00ffff;
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #222;
            color: #00ffff;
            padding: 20px;
            border: 2px solid #00ffff;
            z-index: 10;
            max-width: 400px;
            width: 90%;
        }

        #earning-options {
            display: none; /* Hide earning options before login */
        }

        .w3-hover-neon:hover {
            background-color: #00ffff !important;
            color: #111 !important;
        }

        #message-popup {
            display: none;
            background: rgba(0, 0, 0, 0.9);
            color: #00ffff;
            padding: 15px;
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 20;
        }
        
.button {
    background-color: #1e90ff; /* Neon blue */
    color: #ffffff;
    border: none;
    padding: 15px 30px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 10px;
    transition: all 0.3s ease-in-out;
    box-shadow: 0 0 5px #1e90ff, 0 0 10px #ff1493; /* Glow effect */
}

.button:hover {
    background-color: #ff1493; /* Change to pink on hover */
    box-shadow: 0 0 10px #14d0ff, 0 0 20px #ffffff; /* Intensify glow on hover */
}

.card {
    background-color: #1f1f1f; /* Dark card background */
    border: 1px solid #1e90ff; /* Blue border */
    padding: 20px;
    margin: 20px;
    box-shadow: 0 0 10px #ff1493, 0 0 20px #1e90ff; /* Glow effect */
}

.glow-text {
    color: #ffffff;
    text-shadow: 0 0 5px #14c8ff, 0 0 10px #1e90ff; /* Glow effect */
}
    </style>
</head>
<body>
    <!-- Header -->
    <header class="w3-center w3-padding-16">
        <h1 class="neon-text">Welcome</h1>
        <div id="user-coins" style="display: none;">Coins: <span id="coins-count">0</span></div>
    </header>

    <!-- Navigation bar -->
    <div class="w3-bar w3-navbar">
        <button class="w3-bar-item w3-button w3-right w3-hover-neon" onclick="openPopup('login-popup')" id="login-btn">Login</button>
        <button class="w3-bar-item w3-button w3-right w3-hover-neon" onclick="openPopup('signup-popup')" id="signup-btn">Sign Up</button>
        <button class="w3-bar-item w3-button w3-right w3-hover-neon" id="logout-btn" style="display: none;" onclick="logoutUser()">Logout</button>
        <button class="w3-bar-item w3-button w3-right w3-hover-neon" id="profile-btn" style="display: none;" onclick="openPopup('profile-popup')">Profile</button>
    </div>

    <!-- Main section before login -->
    <div class="w3-container w3-padding-16" id="before-login">
        <h2 class="neon-text">How to Earn</h2>
        <p class="neon-text">Join us and start earning by sharing your referral code, checking in daily, spinning the wheel, reading content, watching videos, and more. Sign up now to get started!</p>
    </div>

    <!-- Earning options (only visible after login) -->
    <div class="w3-container w3-padding-16" id="earning-options">
        <h2 class="neon-text">Earning Options</h2>
        <div class="card" >
            <h2 class="glow-text">Daily check in</h2>
             <button class="button" onclick="openPopup('referral-popup')">Share Referral Code</button>
            </div>
            <div class="card" >
                <h2 class="glow-text">Daily check in</h2>
                  <button class="button" onclick="window.location.href='daily-checkin.html'">Daily Check-In</button>
                </div> 
                <div class="card" >
                    <h2 class="glow-text">spin to earn</h2>
                    <button class="button" onclick="window.location.href='spin-to-earn.html'">Spin to Earn</button>
                    </div> 
                    <div class="card" >
                        <h2 class="glow-text">Read and earn</h2>
                        <button class="button" onclick="window.location.href='read-and-earn.html'">Read and Earn</button>
                        </div> 
                        <div class="card" >
                            <h2 class="glow-text">watch and earn</h2>
                            <button class="button" onclick="window.location.href='watch-and-earn.html'">Watch and Earn</button>
                            </div> 
                            <div class="card" >
                                <h2 class="glow-text">withdraw</h2>
                                <p>withdraw button show after verify email</p>
                                <button class="button" id="withdraw-btn" style="display: none;" onclick="window.location.href='withdraw.html'">Withdraw</button>
                                </div>
    </div>

    <!-- Login Popup -->
    <div id="login-popup" class="popup">
        <h3 class="neon-text">Login</h3>
        <input class="w3-input w3-margin-bottom" type="email" id="login-email" placeholder="Email" required>
        <input class="w3-input w3-margin-bottom" type="password" id="login-password" placeholder="Password" required>
        <button class="w3-button w3-neon" onclick="loginUser()">Login</button>
        <button class="w3-button w3-neon" onclick="openPopup('forgot-password-popup')">Forgot Password?</button>
        <button onclick="closePopup('login-popup')" class="w3-button w3-neon">Close</button>
        <div id="login-message" class="neon-text" style="display: none;"></div>
    </div>

    <!-- Forgot Password Popup -->
    <div id="forgot-password-popup" class="popup">
        <h3 class="neon-text">Forgot Password</h3>
        <input class="w3-input w3-margin-bottom" type="email" id="forgot-password-email" placeholder="Enter your email" required>
        <button class="w3-button w3-neon" onclick="sendPasswordReset()">Send Reset Email</button>
        <button onclick="closePopup('forgot-password-popup')" class="w3-button w3-neon">Close</button>
        <div id="forgot-message" class="neon-text" style="display: none;"></div>
    </div>

    <!-- Sign Up Popup -->
    <div id="signup-popup" class="popup">
        <h3 class="neon-text">Sign Up</h3>
        <input class="w3-input w3-margin-bottom" type="email" id="signup-email" placeholder="Email" required>
        <input class="w3-input w3-margin-bottom" type="password" id="signup-password" placeholder="Password" required>
        <input class="w3-input w3-margin-bottom" type="text" id="referral-code" placeholder="Enter a Referral Code (optional)">
        <button class="w3-button w3-neon" onclick="signUpUser()">Sign Up</button>
        <button onclick="closePopup('signup-popup')" class="w3-button w3-neon">Close</button>
        <div id="signup-message" class="neon-text" style="display: none;"></div>
    </div>

    <!-- Profile Popup -->
    <div id="profile-popup" class="popup">
        <p>Email: <span id="user-email"></span></p>
        <p>Coins: <span id="popup-coins-count">0</span></p>
        <button id="referral-history-btn" class="w3-button w3-neon" onclick="viewReferralHistory()">Referral History</button>
        <button id="verify-email-btn" class="w3-button w3-neon" onclick="verifyEmail()">Verify Email</button>
        <input class="w3-input w3-margin-bottom" type="text" id="enter-referral-input" placeholder="Enter Referral Code">
        <button id="enter-referral-btn" class="w3-button w3-neon" onclick="enterReferralCode()">Enter Referral Code</button>
        <button onclick="closePopup('profile-popup')" class="w3-button w3-neon">Close</button>
    </div>

    <!-- Referral Popup -->
    <div id="referral-popup" class="popup">
        <p>Share your referral code:</p>
        <p>Website URL: <input type="text" value="https://yourwebsite.com/?ref=12345" readonly></p>
        <button onclick="closePopup('referral-popup')" class="w3-button w3-neon">Close</button>
    </div>

    <!-- Message Popup -->
    <div id="message-popup" class="popup">
        <p id="message-text"></p>
        <button onclick="closePopup('message-popup')" class="w3-button w3-neon">Close</button>
    </div>

    <script type="module">
        // JavaScript code to handle Firebase authentication and user actions
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut, sendPasswordResetEmail, sendEmailVerification } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, updateDoc, getDoc, addDoc, increment, collection, arrayUnion } from "https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js";
    
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCo-22CK4Dg3xxzMHhC8bT9h_54DTSQjfI",
            authDomain: "earn-by-reading-news-fdb97.firebaseapp.com",
            projectId: "earn-by-reading-news-fdb97",
            storageBucket: "earn-by-reading-news-fdb97.appspot.com",
            messagingSenderId: "557093188815",
            appId: "1:557093188815:web:6fb3c6325e7cf39d73b3ba"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
    
        // Function to handle user login
        window.loginUser = function() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
    
            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Show success message in popup
                    showMessage('Login successful!');
                    closePopup('login-popup');
                    document.getElementById('earning-options').style.display = 'block'; // Show earning options
                    document.getElementById('before-login').style.display = 'none'; // Hide before-login section
                })
                .catch((error) => {
                    showMessage(error.message);
                });
        };
    
        // Function to handle user sign up
        window.signUpUser = function() {
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const referralCode = document.getElementById('referral-code').value;
    
            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    showMessage('Sign up successful!');
                    closePopup('signup-popup');
                     document.getElementById('earning-options').style.display = 'block'; // Show earning options
                    document.getElementById('before-login').style.display = 'none'; // Hide before-login section
                })
                .catch((error) => {
                    showMessage(error.message);
                });
        };
    
        // Function to handle user logout
        window.logoutUser = function() {
            signOut(auth).then(() => {
                showMessage('Logout successful!');
                document.getElementById('earning-options').style.display = 'none'; // Hide earning options
                document.getElementById('before-login').style.display = 'block'; // Show before-login section
            }).catch((error) => {
                showMessage(error.message);
            });
        };
    
        // Function to open popups
        window.openPopup = function(popupId) {
            document.getElementById(popupId).style.display = 'block';
        };
    
        // Function to close popups
        window.closePopup = function(popupId) {
            document.getElementById(popupId).style.display = 'none';
        };
    
        // Function to send password reset email
        window.sendPasswordReset = function() {
            const email = document.getElementById('forgot-password-email').value;
            sendPasswordResetEmail(auth, email)
                .then(() => {
                    showMessage('Password reset email sent! Check your inbox.');
                    closePopup('forgot-password-popup');
                })
                .catch((error) => {
                    showMessage(error.message);
                });
        };
    
        // Function to display messages in popup
        function showMessage(message) {
            document.getElementById('message-text').textContent = message;
            openPopup('message-popup');
        }
    
        // Auth state observer
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, update UI
                document.getElementById('user-email').textContent = user.email;
                document.getElementById('coins-count').textContent = "Loading..."; // Replace with actual coins count logic
                document.getElementById('popup-coins-count').textContent = "Loading..."; // Replace with actual coins count logic
                document.getElementById('logout-btn').style.display = 'block'; // Show logout button
                document.getElementById('profile-btn').style.display = 'block'; // Show profile button
                document.getElementById('login-btn').style.display = 'none'; // Hide login button
                document.getElementById('signup-btn').style.display = 'none'; // Hide signup button
            } else {
                // User is signed out, reset UI
                document.getElementById('coins-count').textContent = '0';
                document.getElementById('popup-coins-count').textContent = '0';
                document.getElementById('logout-btn').style.display = 'none'; // Hide logout button
                document.getElementById('profile-btn').style.display = 'none'; // Hide profile button
                document.getElementById('login-btn').style.display = 'block'; // Show login button
                document.getElementById('signup-btn').style.display = 'block'; // Show signup button
            }
        });
    
        // Additional functions for referral history, email verification, and referral code
        window.viewReferralHistory = function() {
            // Implement referral history logic here
            showMessage('Referral history functionality not implemented yet.');
        };
    
        window.verifyEmail = function() {
            const user = auth.currentUser;
            if (user) {
                sendEmailVerification(user).then(() => {
                    showMessage('Verification email sent! Check your inbox.');
                }).catch((error) => {
                    showMessage(error.message);
                });
            }
        };
    
        window.enterReferralCode = function() {
            const referralCode = document.getElementById('enter-referral-input').value;
            // Add logic to handle the referral code (e.g., store it in Firestore)
            showMessage(`Referral code ${referralCode} entered!`);
            closePopup('profile-popup');
        };
    </script>
    
</body>
</html>
